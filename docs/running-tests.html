<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:ital,wght@0,400;0,700;1,400;1,700&amp;family=Nunito:ital,wght@0,400;0,700;1,400;1,700&amp;display=swap" rel="stylesheet"><link rel="stylesheet" href="style.css"><title>Dr. Strangetest, a PHP testing framework</title></head><body><header><h1>Dr. Strangetest</h1><p id="subtitle">Or: How I Learned To Stop Worrying And Test The Code</p><p id="tagline">A testing framework for PHP</p><nav><ul id="navbar"><li><a href=".">Home</a></li><li><a href="documentation.html" class="active">Documentation</a></li><li><a href="contributing.html">Contributing</a></li></ul></nav></header><main><nav id="doc-toc"><ol><li class="collapsible"><input type="checkbox"><a href="getting-started.html">Getting Started</a><ol><li><a href="getting-started.html#requirements">Requirements</a></li><li class="collapsible"><input type="checkbox"><a href="getting-started.html#installation">Installation</a><ol><li><a href="getting-started.html#phar-php-archive">Phar (PHP Archive)</a></li><li><a href="getting-started.html#composer">Composer</a></li></ol></li><li><a href="getting-started.html#verifying-installation">Verifying Installation</a></li></ol></li><li class="collapsible"><input type="checkbox" checked>Running Tests<ol><li><a href="#usage">Usage</a></li><li class="collapsible"><input type="checkbox" checked><a href="#specifying-tests">Specifying Tests</a><ol><li><a href="#specifying-paths">Specifying Paths</a></li><li><a href="#specifying-functions">Specifying Functions</a></li><li><a href="#specifying-classes-and-methods">Specifying Classes and Methods</a></li><li><a href="#combining-specifiers">Combining Specifiers</a></li></ol></li><li><a href="#options">Options</a></li><li class="collapsible"><input type="checkbox" checked><a href="#configuring-php">Configuring PHP</a><ol><li><a href="#errors">Errors</a></li><li><a href="#assertions">Assertions</a></li></ol></li></ol></li><li class="collapsible"><input type="checkbox"><a href="writing-tests.html">Writing Tests</a><ol><li><a href="writing-tests.html#what-is-a-test">What is a Test?</a></li><li><a href="writing-tests.html#making-assertions">Making Assertions</a></li><li><a href="writing-tests.html#testing-exceptions-and-errors">Testing Exceptions and Errors</a></li><li class="collapsible"><input type="checkbox" checked><a href="writing-tests.html#skipping-tests">Skipping Tests</a><ol><li><a href="writing-tests.html#skipping-a-test">Skipping a Test</a></li><li><a href="writing-tests.html#viewing-skipped-tests">Viewing Skipped Tests</a></li></ol></li><li><a href="writing-tests.html#subtests">Subtests</a></li><li class="collapsible"><input type="checkbox" checked><a href="writing-tests.html#test-dependencies">Test Dependencies</a><ol><li><a href="writing-tests.html#declaring-dependencies">Declaring Dependencies</a></li><li><a href="writing-tests.html#setting-a-test-result">Setting a Test Result</a></li><li><a href="writing-tests.html#specifying-test-names">Specifying Test Names</a></li><li><a href="writing-tests.html#depending-on-tests-with-subtests">Depending on Tests with Subtests</a></li><li><a href="writing-tests.html#depending-on-tests-that-are-run-multiple-times">Depending on Tests That Are Run Multiple Times</a></li></ol></li></ol></li><li class="collapsible"><input type="checkbox"><a href="test-fixtures.html">Test Fixtures</a><ol><li class="collapsible"><input type="checkbox" checked><a href="test-fixtures.html#fixture-functions">Fixture Functions</a><ol><li><a href="test-fixtures.html#test-specific-teardown">Test-Specific Teardown</a></li><li><a href="test-fixtures.html#method-setup-and-teardown">Method Setup and Teardown</a></li><li><a href="test-fixtures.html#object-setup-and-teardown">Object Setup and Teardown</a></li><li><a href="test-fixtures.html#function-setup-and-teardown">Function Setup and Teardown</a></li><li><a href="test-fixtures.html#file-setup-and-teardown">File Setup and Teardown</a></li><li><a href="test-fixtures.html#directory-setup-and-teardown">Directory Setup and Teardown</a></li></ol></li><li><a href="test-fixtures.html#managing-resources">Managing Resources</a></li><li><a href="test-fixtures.html#providing-state-to-tests">Providing State to Tests</a></li><li><a href="test-fixtures.html#running-tests-multiple-times">Running Tests Multiple Times</a></li></ol></li><li class="collapsible"><input type="checkbox"><a href="assertions.html">Assertions</a><ol><li><a href="assertions.html#phps-assert">PHP's assert</a></li><li class="collapsible"><input type="checkbox" checked><a href="assertions.html#dr-strangetests-assertions">Dr. Strangetest's Assertions</a><ol><li><a href="assertions.html#assert_different">assert_different</a></li><li><a href="assertions.html#assert_equal">assert_equal</a></li><li><a href="assertions.html#assert_false">assert_false</a></li><li><a href="assertions.html#assert_falsy">assert_falsy</a></li><li><a href="assertions.html#assert_greater">assert_greater</a></li><li><a href="assertions.html#assert_greater_or_equal">assert_greater_or_equal</a></li><li><a href="assertions.html#assert_identical">assert_identical</a></li><li><a href="assertions.html#assert_less">assert_less</a></li><li><a href="assertions.html#assert_less_or_equal">assert_less_or_equal</a></li><li><a href="assertions.html#assert_throws">assert_throws</a></li><li><a href="assertions.html#assert_true">assert_true</a></li><li><a href="assertions.html#assert_truthy">assert_truthy</a></li><li><a href="assertions.html#assert_unequal">assert_unequal</a></li><li><a href="assertions.html#fail">fail</a></li></ol></li><li class="collapsible"><input type="checkbox" checked><a href="assertions.html#writing-custom-assertions">Writing Custom Assertions</a><ol><li class="collapsible"><input type="checkbox" checked><a href="assertions.html#creating-failure-messages">Creating Failure Messages</a><ol><li><a href="assertions.html#formatting-variables">Formatting Variables</a></li><li><a href="assertions.html#generating-diffs">Generating Diffs</a></li><li><a href="assertions.html#formatting-messages">Formatting Messages</a></li></ol></li><li><a href="assertions.html#a-comprehensive-example">A Comprehensive Example</a></li></ol></li></ol></li></ol></nav><article><h2 id="running-tests">Running Tests</h2><h3 id="usage">Usage</h3><p>Run Dr. Strangetest on the command line from your project's root directory:</p><div class="highlight"><pre><span></span><code><span class="go">strangetest [OPTION]... [PATH]...</span>
</code></pre></div>
<p><code>[OPTION]...</code> is zero or more <a href="#options">options to configure Dr. Strangetest's behavior</a>. Some of these may cause Dr. Strangetest to exit early without running your test suite.</p><p><code>[PATH]...</code> allows you to <a href="#specifying-tests">specify one or more paths</a> in which to look for tests. If omitted, this defaults to the current directory.</p><p>If you use Composer, Dr. Strangetest tries to load Composer's autoloader so your project is automatically visible to your test suite.</p><h3 id="specifying-tests">Specifying Tests</h3><p>Dr. Strangetest normally runs <a href="writing-tests#what-is-a-test">your entire test suite</a>. However, you can also limit the run to a subset of tests by using test specifiers.</p><p>Note that, depending on your shell, you may need to enclose some of the commands shown below in quotes to prevent the shell from interpreting certain characters as operators or other special characters.</p><h4 id="specifying-paths">Specifying Paths</h4><p>If you specify one or more paths within your test suite, Dr. Strangetest will run every test it discovers in those paths.</p><p>If the path is a directory, Dr. Strangetest tests the entire directory.</p><p>If the path is a file, Dr. Strangetest tests the entire file. You can further limit tests within the file using <a href="#specifying-functions">function specifiers</a> and/or <a href="#specifying-classes-and-methods">class and method specifiers</a>.</p><p>This tests the <code>test_subdir</code> directory and <code>test_foo.php</code> file in the <code>tests</code> directory:</p><div class="highlight"><pre><span></span><code><span class="go">strangetest tests/test_subdir tests/test_foo.php</span>
</code></pre></div>
<h4 id="specifying-functions">Specifying Functions</h4><p>You can limit tests to one or more functions within a file using function specifiers. A function specifier must follow a file path and are written as follows:</p><div class="highlight"><pre><span></span><code><span class="go">--function=NAME...</span>
</code></pre></div>
<p>Function names must be fully qualified. Multiple functions can be specified by separating them with a comma or by using multiple function specifiers.</p><p>This tests two functions, <code>test_one</code> and <code>test_two</code>, in the file <code>test.php</code>:</p><div class="highlight"><pre><span></span><code><span class="go">strangetest test.php --function=test_one,test_two</span>
</code></pre></div>
<p>This does the same thing:</p><div class="highlight"><pre><span></span><code><span class="go">strangetest test.php --function=test_one --function=test_two</span>
</code></pre></div>
<h4 id="specifying-classes-and-methods">Specifying Classes and Methods</h4><p>You can limit tests to one or more classes or methods within a file by using class specifiers. A class specifier must follow a file path and are written as follows:</p><div class="highlight"><pre><span></span><code><span class="go">--class=CLASSNAME[::METHODNAME...]...</span>
</code></pre></div>
<p>Class names should be fully qualified. Multiple class names can be specified by separating them with a semicolon or by using multiple class specifiers.</p><p>This tests two classes, <code>TestFoo</code> and <code>TestBar</code>, in the file <code>test.php</code>:</p><div class="highlight"><pre><span></span><code><span class="go">strangetest test.php --class=&#39;TestFoo;TestBar&#39;</span>
</code></pre></div>
<p>This does the same thing:</p><div class="highlight"><pre><span></span><code><span class="go">strangetest test.php --class=TestFoo --class=TestBar</span>
</code></pre></div>
<p>You can also specify individual methods within a class by following the class name with double colons (<code>::</code>) and listing a method name. Multiple methods can be specified by separating them with a comma.</p><p>This tests two methods, <code>testOne</code> and <code>testTwo</code>, in classes <code>TestFoo</code> and <code>TestBar</code> in the file <code>test.php</code>:</p><div class="highlight"><pre><span></span><code><span class="go">strangetest test.php \</span>
<span class="go">    --class=&#39;TestFoo::testOne,testTwo;TestBar::testOne,testTwo&#39;</span>
</code></pre></div>
<h4 id="combining-specifiers">Combining Specifiers</h4><p>You can, of course, specify multiple paths each with its own specifiers:</p><div class="highlight"><pre><span></span><code><span class="go">strangetest \</span>
<span class="go">    tests/test_subdir \</span>
<span class="go">    tests/test_foo.php \</span>
<span class="go">        --function=test_one,test_two \</span>
<span class="go">        --class=TestFoo::testOne,testTwo \</span>
<span class="go">    tests/test_bar.php \</span>
<span class="go">        --class=TestBar \</span>
<span class="go">        --function=test_three,test_four</span>
</code></pre></div>
<h3 id="options">Options</h3><p>Dr. Strangetest understands the following options:</p><ul><li><p><code>--help</code></p><p>Display usage and help information and exit.</p></li><li><p><code>-q</code>, <code>--quiet</code></p><p>Omit reporting skipped tests and output unless they occurred in conjunction with an error or failed test. This is the default.</p></li><li><p><code>-v</code>, <code>--verbose</code></p><p>Include skipped tests and all output in reporting.</p></li><li><p><code>--version</code></p><p>Display the version of Dr. Strangetest in use and exit.</p></li></ul><h3 id="configuring-php">Configuring PHP</h3><p>Dr. Strangetest automatically configures PHP to catch any errors in your code and ensure the framework runs properly. Although nothing prevents you from changing these settings, it's strongly recommended that you use what's described below.</p><h4 id="errors">Errors</h4><p>All errors are enabled and an error handler is registered that converts all errors to an <code>ErrorException</code> and throws them.</p><h4 id="assertions">Assertions</h4><p>Dr. Strangetest configures PHP's assertions to support using PHP's built-in <code>assert</code> function. <a href="assertions#dr-strangetests-assertions">Dr. Strangetest's assertions</a> do not use <code>assert</code>, but the framework does require <code>zend.assertion</code> to be enabled.</p><p><code>assert_options</code> is configured as follows:</p><ul><li><p><code>assert.active</code> is enabled.</p></li><li><p><code>assert.warning</code> is disabled.</p></li><li><p><code>assert.bail</code> is disabled.</p></li><li><p><code>assert.quiet_eval</code> is disabled.</p></li><li><p>An assertion handler is registered with <code>assert.callback</code> that converts all failed assertions to an <code>AssertionError</code> exception (in PHP 7 and higher) or a <code>strangetest\Failure</code> exception (in PHP 5) and throws them. These exceptions are recognized as failed assertions while any other exception is treated as an error. The handler is only called if <code>assert.exception</code> is disabled.</p></li></ul><p>In PHP 7 and higher, the following additional configuration occurs:</p><ul><li><p>If <code>zend.assertions</code> is set to <code>-1</code> ("production mode"), Dr. Strangetest exits. Otherwise, this setting is enabled.</p></li><li><p>In PHP 7.2 and higher, <code>assert.exception</code> is enabled.</p></li></ul></article></main><footer><p><a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" src="https://i.creativecommons.org/l/by/4.0/80x15.png"></a><br>This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.</p><p>Please open an issue if you find an error in these pages. Fixes are also welcome!</p></footer></body></html>